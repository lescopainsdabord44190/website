@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'Brother 1815 Printed';
  src: url('/src/style/fonts/Brother1815/brother1815printed-webfont.woff2') format('woff2'),
       url('/src/style/fonts/Brother1815/brother1815printed-webfont.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Brother 1815 Printed';
  src: url('/src/style/fonts/Brother1815/brother1815printed-black-webfont.woff2') format('woff2'),
       url('/src/style/fonts/Brother1815/brother1815printed-black-webfont.woff') format('woff');
  font-weight: bold;
  font-style: normal;
  font-display: swap;
}

@layer base {
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Brother 1815 Printed', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;    
  }
  
  h1 {
    font-weight: bold;
  }
}

.codex-editor {
  @apply text-base;
}

.codex-editor__redactor {
  @apply pb-0;
}

.ce-block__content,
.ce-toolbar__content {
  @apply max-w-none;
}

.ce-toolbar__plus {
  @apply text-gray-600 hover:text-[#328fce];
}

.ce-toolbar__settings-btn {
  @apply text-gray-600 hover:text-[#328fce];
}

.ce-inline-toolbar {
  @apply bg-white border border-gray-300 rounded-lg shadow-lg;
}

.ce-inline-tool {
  @apply text-gray-700 hover:bg-gray-100;
}

.ce-conversion-toolbar {
  @apply bg-white border border-gray-300 rounded-lg shadow-lg;
}

.ce-settings {
  @apply bg-white border border-gray-300 rounded-lg shadow-lg;
}

.ce-toolbar__settings-btn {
  background-color: #fff;
}

/* Fix pour le menu popover (block chooser) qui s'affiche quand on tape "/" */
.ce-popover {
  z-index: 9999 !important;
}

.ce-popover__container {
  transform: translateX(24px) !important;
}

.ce-popover__items {
  z-index: 9999 !important;
  /* Permettre le scroll vertical pour voir tous les outils */
  max-height: 400px !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

.ce-popover__item {
  z-index: 9999 !important;
}

/* S'assurer que le container de l'éditeur permet l'overflow visible pour les menus */
.codex-editor {
  overflow: visible !important;
  position: relative;
}

.codex-editor__redactor {
  overflow: visible !important;
}

/* Container de l'éditeur - permettre l'overflow visible pour les popovers */
.codex-editor__redactor,
.ce-block__content,
.ce-toolbar__content {
  overflow: visible !important;
}

.cdx-block {
  @apply py-2;
}

.ce-paragraph {
  @apply text-gray-700 leading-relaxed;
}

.ce-header {
  @apply font-bold text-gray-800;
}

.cdx-list {
  @apply text-gray-700;
}

.cdx-checklist__item-checkbox {
  @apply border-2 border-gray-300 rounded;
}

.cdx-checklist__item--checked .cdx-checklist__item-checkbox {
  @apply bg-green-500 border-green-500;
}

.cdx-quote {
  @apply border-l-4 border-[#328fce] bg-gray-50 pl-4 py-2 rounded-r-lg;
}

.cdx-warning {
  @apply border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded-r-lg;
}

.cdx-alert {
  @apply p-4 rounded-r-lg;
}

.cdx-alert-type-selector {
  @apply flex gap-2 mb-3;
}

.cdx-alert-type-button {
  @apply px-3 py-1 rounded text-sm font-medium border-2 transition-all cursor-pointer;
}

.cdx-alert-type-button:hover {
  @apply opacity-80;
}

.cdx-alert .cdx-input {
  @apply outline-none;
}

.cdx-alert .cdx-input:empty:before {
  content: attr(data-placeholder);
  @apply text-gray-400;
}

.cdx-alert .cdx-input:first-of-type {
  @apply font-semibold text-lg mb-2;
}

.cdx-alert .cdx-input:last-of-type {
  @apply text-base leading-relaxed;
}

.tc-wrap {
  @apply overflow-x-auto;
}

.tc-table {
  @apply border border-gray-300 rounded-lg;
}

.tc-row:first-child {
  @apply bg-gray-100;
}

.tc-cell {
  @apply border border-gray-300 px-4 py-2;
}

.image-tool__image {
  @apply rounded-lg shadow-md;
}

.image-tool__caption {
  @apply text-sm text-gray-500 text-center mt-2;
}

.editorjs-image-blur-overlay {
  @apply fixed inset-0 bg-black/70 z-[9999] flex items-center justify-center p-6;
}

.editorjs-image-blur-panel {
  @apply bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] flex flex-col gap-4 p-4;
}

.editorjs-image-blur-header h3 {
  @apply text-lg font-semibold text-gray-900;
}

.editorjs-image-blur-header p {
  @apply text-sm text-gray-600;
}

.editorjs-image-blur-canvas-wrapper {
  @apply relative bg-gray-100 rounded-lg overflow-hidden;
}

.editorjs-image-blur-canvas {
  @apply w-full h-auto block cursor-crosshair;
  touch-action: none;
}

.editorjs-image-blur-brush {
  @apply absolute rounded-full border border-white/80 bg-white/20 pointer-events-none;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
}

.editorjs-image-blur-controls {
  @apply flex flex-col gap-3;
}

@media (min-width: 768px) {
  .editorjs-image-blur-controls {
    @apply flex-row items-center justify-between;
  }
}

.editorjs-image-blur-mode {
  @apply inline-flex items-center gap-0 rounded-md border border-gray-200 overflow-hidden;
}

.editorjs-image-blur-toggle {
  @apply px-3 py-2 text-sm font-semibold text-gray-600 transition;
}

.editorjs-image-blur-toggle.active {
  @apply bg-[#328fce] text-white;
}

.editorjs-image-blur-toggle + .editorjs-image-blur-toggle {
  @apply border-l border-gray-200;
}

.editorjs-image-blur-rotation {
  @apply hidden;
  position: relative;
}

.editorjs-image-blur-rotation input[type='range'] {
  @apply accent-[#ff9fa8];
}

.editorjs-image-blur-emoji-preview {
  @apply inline-flex items-center justify-center text-2xl w-10 h-10 rounded-full bg-gray-100 text-gray-700 cursor-pointer;
  transition: transform 0.15s ease;
}

.editorjs-image-blur-emoji-picker {
  @apply hidden grid grid-cols-10 gap-2 p-3 bg-white border border-gray-200 rounded-lg shadow-lg;
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  z-index: 10;
  width: max-content;
  max-width: 360px;
}

.editorjs-image-blur-emoji-picker.open {
  @apply grid;
}

.editorjs-image-blur-emoji-option {
  @apply w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100;
  font-size: 20px;
}

.editorjs-image-blur-size {
  @apply flex flex-col gap-2 text-sm text-gray-700;
}

.editorjs-image-blur-size input[type='range'] {
  @apply accent-[#328fce];
}

.editorjs-image-blur-actions {
  @apply flex items-center justify-end gap-2;
}

.editorjs-image-blur-button {
  @apply px-4 py-2 rounded-md text-sm font-semibold transition;
}

.editorjs-image-blur-button.primary {
  @apply bg-[#328fce] text-white hover:bg-[#2b7bb3];
}

.editorjs-image-blur-button.secondary {
  @apply bg-gray-100 text-gray-700 hover:bg-gray-200;
}

.editorjs-image-blur-button:disabled {
  @apply opacity-60 cursor-not-allowed;
}

/* Forcer le texte blanc dans les colonnes avec thème de fond */
.editorjs-columns-with-theme .ce-paragraph,
.editorjs-columns-with-theme .ce-header,
.editorjs-columns-with-theme .ce-quote,
.editorjs-columns-with-theme .cdx-list,
.editorjs-columns-with-theme .cdx-checklist,
.editorjs-columns-with-theme .cdx-warning,
.editorjs-columns-with-theme .cdx-alert,
.editorjs-columns-with-theme .ce-block__content,
.editorjs-columns-with-theme .tc-cell {
  @apply text-white !important;
}

.editorjs-columns-with-theme .ce-toolbar__plus,
.editorjs-columns-with-theme .ce-toolbar__settings-btn {
  @apply text-white hover:text-white/80;
}

@layer utilities {
  .text-brand-green {
    color: #84c19e;
  }

  .text-brand-pink {
    color: #ff9fa8;
  }

  .text-brand-cream {
    color: #FEF5F0;
  }

  .text-brand-yellow {
    color: #ffbf40;
  }

  .text-brand-orange {
    color: #ff6243;
  }

  .text-brand-blue {
    color: #328fce;
  }

  .text-brand-brown {
    color: #6b3a1f;
  }

  .bg-brand-green {
    background-color: #84c19e;
  }

  .bg-brand-pink {
    background-color: #ff9fa8;
  }

  .bg-brand-cream {
    background-color: #FEF5F0;
  }

  .bg-brand-yellow {
    background-color: #ffbf40;
  }

  .bg-brand-orange {
    background-color: #ff6243;
  }

  .bg-brand-blue {
    background-color: #328fce;
  }

  .bg-brand-brown {
    background-color: #6b3a1f;
  }
}

.swiper-pagination-bullet {
  @apply w-3 h-3 bg-gray-300 opacity-100;
}

.swiper-pagination-bullet-active {
  @apply bg-[#328fce] scale-125;
}
